âœ” ì €ìž¥ì€ ë¶„ì‚°í•´ì„œ. ì¶œë ¥ì€ í•©ì³ì„œ !


ë°ì´í„° ì¤‘ë³µì„ ìµœì†Œí™” í•˜ê¸° ìœ„í•´ í…Œì´ë¸”ì„ ë¶„ë¦¬í–ˆì—ˆëŠ”ë°, ë¶„ë¦¬í•œ í…Œì´ë¸”ì„ ì‚¬ìš©ìžê°€ í•œë²ˆì— í™•ì¸í•˜ë ¤ê³  í• ë•Œ, ê·¸ë•Œ JOINì„ ì‚¬ìš©í•œë‹¤.



ë”ë³´ê¸°
Join
- ê°ê°ì˜ í…Œì´ë¸”ì— ë¶„ë¦¬ë˜ì–´ ìžˆëŠ” ì—°ê´€ì„± ìžˆëŠ” ë°ì´í„°ë“¤ì„ ì—°ê²°í•˜ê±°ë‚˜ ì¡°í•©í•˜ëŠ” ì¼ë ¨ì˜ ìž‘ì—…ë“¤

- ì—¬ëŸ¬ í…Œì´ë¸”ì— í©ì–´ì ¸ ìžˆëŠ” ì •ë³´ì¤‘ì—ì„œ ì‚¬ìš©ìžê°€ í•„ìš”í•œ ì •ë³´ë§Œ ê°€ì ¸ì™€ì„œ ê°€ìƒì˜ í…Œì´ë¸”ê°„ ê³µí†µëœ ì—´ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰



âœ”  ì¡°ì¸ì€ ì—°ê²°ê³ ë¦¬ ì°¾ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤!


ê¸°ë³¸ ë¬¸ë²•
select ì¡°íšŒ í•  ì»¬ëŸ¼
from í…Œì´ë¸” A join í…Œì´ë¸” B  -- ì—°ê²° í•  í…Œì´ë¸”
on A.ê³µí†µì»¬ëŸ¼ = B.ê³µí†µì»¬ëŸ¼; -- ì—°ê²°ê³ ë¦¬




í…Œì´ë¸” ë¶„ë¦¬ê°€ ëœ emp í…Œì´ë¸”ê³¼ dept í…Œì´ë¸”ì„ ì´ìš©í•´ join ì—°ìŠµì„ í•´ë³¼ê±´ë°,

emp í…Œì´ë¸”ê³¼ dept í…Œì´ë¸”ì˜ ì—°ê²°ê´€ê³„ë¥¼ ê°™ì´ ì‚´íŽ´ë³´ìž.






ê° í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì„ ìž˜ ë³´ë©´, deptNoê°€ ê³µí†µì ìœ¼ë¡œ ë“¤ì–´ê°€ ìžˆëŠ”ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìžˆë‹¤.

ì´ë¥¼ í†µí•´, empí…Œì´ë¸”ê³¼ deptí…Œì´ë¸”ì˜ ì—°ê²°ê³ ë¦¬ëŠ” deptNo ë¼ëŠ”ê±¸ í™•ì¸.



ì´ì œ ì´ë¥¼ ì´ìš©í•´ì„œ Joinì˜ ì¢…ë¥˜ì™€, ê·¸ ì˜ˆì‹œë“¤ì„ ì‚´íŽ´ë³´ìž.



Joinì˜ ì¢…ë¥˜
1) ë‚´ë¶€ ì¡°ì¸(inner join) - â˜…â˜…ì–‘ìª½ í…Œì´ë¸”ì— ëª¨ë‘ ë°ì´í„°ê°€ ì¡´ìž¬í•´ì•¼ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤â˜…â˜…
   ì¼ë°˜ì ìœ¼ë¡œ, inner join í’€ëª…ì¹­ìœ¼ë¡œ ì“°ê¸°ë³´ë‹¤ëŠ” inner ìƒëžµí•´ì„œ joinìœ¼ë¡œë§Œ ì‚¬ìš©í•œë‹¤.



ì˜ˆì œ 1)

emp, dept í…Œì´ë¸”ì—ì„œ ë¶€ì„œë²ˆí˜¸,ì‚¬ì›ëª…,ì§ì—…,ë¶€ì„œëª…,ì§€ì—­ ì¡°íšŒ

ë‹¨, ì§ì—…(job)ì´ CLERKì¸ ì‚¬ì› ë°ì´í„°ë§Œ ì¡°íšŒ

SELECT e.deptno, e.ename, e.job, d.dname, d.loc
FROM emp e JOIN dept d
ON e.deptno=d.deptno
where e.job='CLERK';




ì˜ˆì œ 2)

emp, dept í…Œì´ë¸”ì—ì„œ ë¶€ì„œë²ˆí˜¸,ì‚¬ì›ëª…,ì§ì—…,ë¶€ì„œëª…,ì§€ì—­ ì¡°íšŒ

ë‹¨, ì§ì—…(job)ì´ CLERKì¸ ì‚¬ì›ì´ê±°ë‚˜ Managerì¸ ì‚¬ì›ë§Œ ì¡°íšŒ

SELECT e.deptno, e.ename, e.job, d.dname, d.loc
FROM emp e JOIN dept d
ON e.deptno=d.deptno
where job in('CLERK', 'MANAGER');




ì˜ˆì œ 3)

emp, dept í…Œì´ë¸”ì—ì„œ ì§€ì—­(loc)ë³„ ê¸‰ì—¬(sal)ì˜ í‰ê·  ì¡°íšŒ

Join, group by ëª¨ë‘ ì´ìš©



SELECT d.loc, round(avg(IFNULL(e.sal,0)),1)
FROM emp e JOIN dept d
ON e.deptno=d.deptno
GROUP BY d.loc;







ìœ„ì™€ ê°™ì´ JOIN ì˜ ê²€ìƒ‰ ê²°ê³¼ê°€ 3ê±´ì´ ë‚˜ì˜¤ëŠ”ë°, ì›ëž˜ deptí…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì°¾ì•„ë³´ìž.






JOIN ê²°ê³¼ì— deptì˜ ì§€ì—­ BOSTONì´ ì¡°íšŒë˜ì§€ ì•Šì•˜ë‹¤.

ì´ëŠ” inner joinì„ ì´ìš©í–ˆê¸° ë•Œë¬¸ì¸ë°, emp í…Œì´ë¸”ì—ì„œëŠ” locê°€ BOSTONì¸ ë°ì´í„° ( deptNo=40 )ê°€ ì—†ê¸° ë•Œë¬¸.




ì¡°íšŒ ê²°ê³¼ê°€ NULLì´ ë‚˜ì˜¨ ìƒíƒœì´ë‹¤.




âœ”  ì´ë¥¼ í†µí•´, inner joinì€ ì–‘ìª½ í…Œì´ë¸”ì— ëª¨ë‘ë°ì´í„° ê°€ ì¡´ìž¬ í•´ì•¼ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.




ì˜¤ë¼í´ì—ì„œì˜ NVLí•¨ìˆ˜ ì™€ëŠ” ë‹¤ë¥´ê²Œ, MySQLì€ IFNULL í•¨ìˆ˜ë¥¼ ì´ìš©í•œë‹¤.
IFNULL(ê°’1,ê°’2) - ê°’1ì´ NULL ì´ë©´ ê°’2ë¡œ ëŒ€ì¹˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê°’1ì„ ì¶œë ¥í•œë‹¤.


ì§€ì—­ë³„ ê¸‰ì—¬ì˜ í‰ê· ì„ êµ¬í•´ì•¼í•˜ëŠ”ë°, í‰ê· ì„ êµ¬í•˜ëŠ” ë‚´ìž¥í•¨ìˆ˜ëŠ” AVG( í•„ë“œëª… ) ì´ë©°,

salì´ NULL ì¸ ê²½ìš°ë„ ì¹´ìš´íŒ…ì„ ê°™ì´ í•´ì£¼ì–´ì•¼ í•˜ë¯€ë¡œ, í‰ê· ê°’ì„ ì œëŒ€ë¡œ ë‚´ê¸°ìœ„í•´ IFNULL(ê°’1, ê°’2) í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

ê·¸ë¦¬ê³  í‰ê· ê°’ì´ ì†Œìˆ˜ì ì´ ë§Žì´ ë‚˜ì˜¤ë¯€ë¡œ, ê¹”ë”í•˜ê²Œ ë„ì¶œí•´ë‚´ì˜¤ê¸° ìœ„í•´ì„œëŠ” ROUND(ìˆ«ìž, ìžë¦¿ìˆ˜) í•¨ìˆ˜ë¥¼ í†µí•´ ë°˜ì˜¬ë¦¼ ê¹Œì§€ í•´ì¤€ë‹¤.



'ì§€ì—­ë³„' ê¸‰ì—¬ ì´ë¯€ë¡œ, SELECT ë¬¸ì— LOC ì™€ GROUP BYë¡œ ë¬¶ì–´ì£¼ëŠ”ê²ƒ ê¹Œì§€ ìžŠì§€ ë§ìž.



ðŸ’¡ ROUND(ìˆ«ìž,ìžë¦¿ìˆ˜) - ìˆ«ìžë¥¼ ì†Œìˆ˜ì  ì´í•˜ ìžë¦¿ìˆ˜ì—ì„œ ë°˜ì˜¬ë¦¼.(ìžë¦¿ìˆ˜ëŠ” ì–‘ìˆ˜,0,ìŒìˆ˜)






2) ì™¸ë¶€ ì¡°ì¸ ( outer join )
- inner joinê³¼ëŠ” ë°˜ëŒ€ë¡œ í•œìª½ í…Œì´ë¸”ì—ëŠ” ë°ì´í„°ê°€ ìžˆê³ ,

í•œìª½ í…Œì´ë¸”ì— ì—†ëŠ” ê²½ìš°ì— ë°ì´í„°ê°€ ìžˆëŠ” ìª½ í…Œì´ë¸”ì˜ ë‚´ìš©ì„ ì „ë¶€ ì¶œë ¥í•˜ê²Œ í•˜ëŠ” ë°©ë²•



LEFT JOIN : ì™¼ìª½ì— ìžˆëŠ” í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¥¸ìª½ì— ìžˆëŠ” í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
RIGHT JOIN : ì˜¤ë¥¸ìª½ì— ìžˆëŠ” í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ì™¼ìª½ì— ìžˆëŠ” í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.


bbinya.tistory.com/17?category=919108  ì‹¤ìŠµìš© ë°ì´í„° ì°¸ê³ 





ì˜ˆì œ 1) student í…Œì´ë¸”ê³¼ professor í…Œì´ë¸”ì„ ì¡°ì¸í•˜ì—¬ í•™ìƒì´ë¦„ê³¼ ì§€ë„êµìˆ˜ ì´ë¦„ì„ ì¶œë ¥í•˜ì‹œì˜¤.

ë‹¨, ì§€ë„êµìˆ˜ê°€ ê²°ì •ë˜ì§€ ì•Šì€ í•™ìƒì˜ ëª…ë‹¨ë„ í•¨ê»˜ ì¶œë ¥í•˜ì‹œì˜¤. (í•™ìƒ ë°ì´í„°ëŠ” ì „ë¶€ ì¶œë ¥ë˜ë„ë¡)



âœ” inner join ì„ ì´ìš©í–ˆì„ë•Œ
select s.*, p.name ì§€ë„êµìˆ˜ëª…
from student s join professor p
on s.profno=p.profno; -- 15ê±´ => ì§€ë„êµìˆ˜ê°€ ì—†ëŠ” í•™ìƒì€ ì œì™¸


âœ” Outer Joinì„ ì´ìš©í•˜ê²Œ ëœë‹¤ë©´
select s.*, p.name ì§€ë„êµìˆ˜ëª…
from student s left outer join professor p -- outerëŠ” ìƒëžµ ê°€ëŠ¥
on s.profno=p.profno; -- 20ê±´


ðŸ”Ž CHECK
student ë‹¤ ë‚˜ì˜¤ê²Œ í• ê±°ì•¼? ì™¼ìª½ì— ìžˆë„¤? left outer ì¶”ê°€
â†’ ë°ì´í„°ê°€ ìžˆëŠ” ìª½ì— í‘œì‹œë¥¼ í•¨
í•™ìƒ ë°ì´í„°ëŠ” ì „ë¶€ ì¶œë ¥í•´ì•¼ í•˜ë¯€ë¡œ í•™ìƒ í…Œì´ë¸”ì„ í–¥í•´ í‘œì‹œ
í•™ìƒ í…Œì´ë¸”ì´ ì™¼ìª½ì— ìžˆìœ¼ë¯€ë¡œ left


ì˜ˆì œ 2) student í…Œì´ë¸”ê³¼ professor í…Œì´ë¸”ì„ ì¡°ì¸í•˜ì—¬ í•™ ìƒì´ë¦„ê³¼ ì§€ë„êµìˆ˜ ì´ë¦„ì„ ì¶œë ¥ í•˜ì‹œì˜¤. --ë‹¨, ì§€ë„í•™ìƒì´ ê²°ì •ë˜ì§€ ì•Šì€ êµìˆ˜ì˜ ëª…ë‹¨ë„ í•¨ê»˜ ì¶œë ¥í•˜ì‹œì˜¤. (êµìˆ˜ ë°ì´í„°ëŠ” ì „ë¶€ ì¶œë ¥ë˜ë„ë¡)



select s.*, p.name êµìˆ˜ëª…
from student s right join professor p
on s.profno = p.profno;


ì˜ˆì œ 3) student í…Œì´ë¸”ê³¼ professor í…Œì´ë¸”ì„ ì¡°ì¸í•˜ì—¬ í•™ìƒì´ë¦„ê³¼ ì§€ë„êµìˆ˜ ì´ë¦„ì„ ì¶œë ¥í•˜ì‹œì˜¤.

ë‹¨, ì§€ë„í•™ìƒì´ ê²°ì •ë˜ì§€ ì•Šì€ êµìˆ˜ì˜ ëª…ë‹¨ê³¼ ì§€ë„êµìˆ˜ê°€ ê²°ì • ì•ˆ ëœ í•™ìƒ ëª…ë‹¨ì„ í•œêº¼ë²ˆì— ì¶œë ¥í•˜ì‹œì˜¤.



select s.*, p.name ì§€ë„êµìˆ˜ëª…
from student s left join professor p
on s.profno=p.profno
union
select s.*, p.name ì§€ë„êµìˆ˜ëª…
from student s right join professor p
on s.profno=p.profno;


âœ” MySQL ì—ì„œëŠ” Oracleê³¼ëŠ” ë‹¬ë¦¬ full outer join ì„ ì§€ì› ì•ˆí•˜ë¯€ë¡œ, left joinê³¼ right joinì„ ì´ìš©í•˜ì—¬ union ì„ ì‚¬ìš©í•œë‹¤.




3) self join
- ì›í•˜ëŠ” ë°ì´í„°ê°€ í•˜ë‚˜ì˜ í…Œì´ë¸”ì— ë‹¤ ë“¤ì–´ ìžˆì„ ê²½ìš° í•˜ë‚˜ì˜ í…Œì´ë¸”ì„ ë©”ëª¨ë¦¬ìƒì—ì„œ ë³„ëª…ì„ ë‘ ê°œë¡œ ì‚¬ìš©í•´ì„œ ê°€ìƒìœ¼ë¡œ 2ê°œì˜ í…Œì´ë¸”ë¡œ ë§Œë“  í›„ ì¡°ì¸ ìž‘ì—…ì„ ìˆ˜í–‰

self join ê°™ì€ ê²½ìš°ì—ëŠ” outer join ì´ìš©í•˜ëŠ”ê²Œ ì¼ë°˜ì ì´ë‹¤.

âœ”  main ì„ ìž˜ ì •í•˜ìž


ì˜ˆì œ 1)  ì‚¬ì›ì •ë³´ì™€ í•´ë‹¹ ì‚¬ì›ì˜ ì§ì† ìƒê´€ì´ë¦„ ì¡°íšŒ

select a.*, b.firstname ì§ì†ìƒê´€ì´ë¦„
from employees a left join employees b
on a.reportsTo = b.employeeNumber
order by a.employeeNumber;


4) cross join(ì¹´í‹°ì…˜ ê³±) - ì°¸ê³ ìš©
- ì¡°ì¸ì¡°ê±´ì´ ì—†ëŠ” ê²½ìš° ë‘ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê³±í•œê°œìˆ˜ë§Œí¼ì˜ ë°ì´í„°ê°€ ì¶œë ¥ë¨



select * from emp; # 14ê±´
select * from dept; # 4ê±´
select e.*, d.*
from emp e, dept d  --join ì¡°ê±´ì´ ì—†ìœ¼ë©´ ê·¸ëƒ¥ cross join í•œê²ƒ
order by empno, d.deptno; --14*4=>56ê±´

select e.*, d.*
from emp e cross join dept d
order by empno, d.deptno;




- ì¶œì²˜ : https://bbinya.tistory.com/18